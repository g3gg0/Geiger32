
#include <Wire.h>

#define ENABLE_GxEPD2_GFX 0
#define MIN(a,b) ((a)<=(b)?(a):(b))

#include <GxEPD2_BW.h>
#include <GxEPD2_3C.h>
#include <GxEPD2_7C.h>
#include <Fonts/FreeMonoBold9pt7b.h>
#include <U8g2_for_Adafruit_GFX.h>

// select the display class and display driver class in the following file (new style):
#include "GxEPD2_display_selection_new_style.h"

U8G2_FOR_ADAFRUIT_GFX u8g2Fonts;

const char epd_logo_string[] = "Geiger v3.1";
const char epd_logo_copyright[] = "\xA9 g3gg0.de";
#define geiger_width 128
#define geiger_height 140


uint64_t epd_lasttime = 0;
extern uint32_t det_counts_last;


/* https://www.flaticon.com/free-icon/geiger-counter_3325167 */

static unsigned char geiger_bw[] = {
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0xb6, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0xaa, 0x02, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x49, 0x44, 0x44, 0x44, 0x44, 0x44,
   0x44, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x4a, 0x11,
   0x11, 0x11, 0x11, 0x11, 0x91, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x40, 0x15, 0x4a, 0x4a, 0x4a, 0x4a, 0x4a, 0x4a, 0x02, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x55, 0x48, 0x48, 0x48, 0x48, 0x48,
   0x08, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x85, 0x22,
   0x21, 0x21, 0x21, 0x21, 0x51, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x40, 0x2d, 0x24, 0x0a, 0x25, 0x0a, 0x45, 0x42, 0x01, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x92, 0x90, 0x50, 0x88, 0x50, 0x08,
   0x09, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x95, 0x12,
   0x05, 0x21, 0x05, 0x29, 0xa9, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x40, 0x25, 0x44, 0xa8, 0x94, 0x50, 0x42, 0x04, 0x05, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0xc0, 0x4a, 0x91, 0x02, 0x01, 0x45, 0x88,
   0x50, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x0a, 0x4a,
   0x54, 0x2a, 0x88, 0x12, 0x05, 0x05, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0xc0, 0xaa, 0x80, 0x40, 0x40, 0x29, 0x52, 0x28, 0x01, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x15, 0x2a, 0x15, 0x15, 0x42, 0x88,
   0x42, 0x06, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0xa5, 0x20,
   0x40, 0xa2, 0x48, 0x11, 0x4a, 0x00, 0xc0, 0x0b, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x40, 0x15, 0x45, 0x15, 0x09, 0x05, 0xa2, 0x10, 0x05, 0x40, 0x15,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x55, 0x14, 0x22, 0x51, 0x50, 0x0a,
   0x45, 0x00, 0x80, 0x37, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x0a, 0x41,
   0x14, 0x0a, 0x45, 0x20, 0x90, 0x06, 0xc0, 0x4a, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x40, 0x55, 0x4a, 0x41, 0x50, 0x14, 0xa5, 0x12, 0x00, 0x40, 0x2b,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x09, 0x11, 0x2a, 0x85, 0xa0, 0x08,
   0xa2, 0x06, 0xc0, 0x16, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc0, 0x2a, 0xa2,
   0x40, 0x90, 0x0a, 0xa2, 0x08, 0x00, 0x80, 0x35, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x40, 0x95, 0x04, 0x95, 0x0a, 0x50, 0x09, 0xa5, 0x06, 0xc0, 0x26,
   0x00, 0x00, 0x00, 0xe0, 0x07, 0x00, 0x95, 0x54, 0x10, 0x50, 0x05, 0x52,
   0x08, 0x04, 0x80, 0x2d, 0x00, 0x00, 0x00, 0xf8, 0x07, 0x00, 0x55, 0xa9,
   0x66, 0xab, 0x6a, 0x95, 0xb5, 0x02, 0xc0, 0x2a, 0x00, 0x00, 0x00, 0xf8,
   0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x2b,
   0x00, 0x00, 0x00, 0xf8, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0xc0, 0x56, 0x00, 0x00, 0x00, 0xf8, 0x07, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x15, 0x00, 0x00, 0xf0, 0xff,
   0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc0, 0x56,
   0x00, 0x00, 0xfe, 0xff, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0xc0, 0x2a, 0x00, 0x80, 0xff, 0xff, 0x07, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x0b, 0x00, 0xe0, 0xff, 0xff,
   0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x15,
   0x00, 0xf8, 0xff, 0xff, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0xf8, 0xff, 0xff, 0x07, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfe, 0xff, 0xff,
   0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0xff, 0xff, 0xff, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x80, 0xff, 0x7f, 0xfc, 0x07, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xff, 0x1f, 0xfc,
   0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0xc0, 0xff, 0x03, 0xfc, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0xc0, 0xff, 0x03, 0xf8, 0x07, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xe0, 0xff, 0x00, 0xe0,
   0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x05,
   0xf0, 0x7f, 0x00, 0x80, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0xc0, 0x2d, 0xf0, 0x3f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x13, 0xf8, 0x3f, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc0, 0x2e,
   0xf8, 0x1f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x40, 0x53, 0xf8, 0x1f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc0, 0x2e, 0xfc, 0x0f, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x15,
   0xfc, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0xc0, 0x2b, 0xfc, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x55, 0xfc, 0x07, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x17,
   0xfc, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0xc0, 0x2a, 0xfc, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x05, 0xfe, 0x03, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0xfe, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0xfe, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfe, 0x03, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0xfe, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0xfe, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfe, 0x03, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0xfc, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0xfc, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfc, 0x07, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0xfc, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0xfc, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfc, 0x07, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0xfc, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0xf8, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf8, 0x1f, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0xf8, 0x1f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0xf0, 0x1f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf0, 0x3f, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0xf0, 0x3f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0xe0, 0x3f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xe0, 0x7f, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0xe0, 0x7f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0xc0, 0x7f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc0, 0x7f, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0xc0, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x80, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xff, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x80, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x80, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xff, 0x01, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0xff, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x80, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0x01, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0xff, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xff, 0x01, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0xff, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0x01, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x80, 0xff, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xff, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0xff, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x80, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xff, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x80, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x80, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xff, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x80, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0xc0, 0x7f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc0, 0x7f, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0xc0, 0x7f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x80, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc0, 0x7f, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0xc0, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0xc0, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xff, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x80, 0xff, 0x01, 0x00, 0x00, 0x24, 0x22, 0x22, 0x22, 0x92, 0xff, 0xff,
   0x7f, 0x11, 0x01, 0x00, 0x80, 0xff, 0x01, 0x00, 0x00, 0x55, 0x55, 0x55,
   0xd5, 0x2a, 0xfc, 0xff, 0xdf, 0xaa, 0x16, 0x00, 0x00, 0xff, 0x03, 0x00,
   0x40, 0xaa, 0xaa, 0xaa, 0x2a, 0xd5, 0xfb, 0xff, 0xbf, 0xaa, 0x0a, 0x00,
   0x00, 0xff, 0x07, 0x00, 0x80, 0xaa, 0xaa, 0xaa, 0xaa, 0x2a, 0xfb, 0xff,
   0xdf, 0xaa, 0x14, 0x00, 0x00, 0xfe, 0x1f, 0x00, 0x60, 0x55, 0x55, 0x55,
   0x55, 0xa9, 0xde, 0xb6, 0xbd, 0xaa, 0x2a, 0x00, 0x00, 0xfe, 0x7f, 0x00,
   0x44, 0x49, 0x49, 0xa5, 0x94, 0xaa, 0xfa, 0xff, 0x7f, 0xa5, 0x2a, 0x00,
   0x00, 0xfc, 0xff, 0xff, 0x5f, 0x55, 0x55, 0xaa, 0xaa, 0x52, 0xff, 0xff,
   0xd7, 0xaa, 0x0a, 0x00, 0x00, 0xf8, 0xff, 0xff, 0x5f, 0x55, 0x55, 0x55,
   0x55, 0x55, 0xf5, 0xff, 0x5f, 0x95, 0x2a, 0x00, 0x00, 0xf8, 0xff, 0xff,
   0x4f, 0x95, 0xaa, 0x4a, 0xa9, 0xaa, 0xbe, 0x6d, 0x7f, 0x55, 0x15, 0x00,
   0x00, 0xe0, 0xff, 0xff, 0x5f, 0xa9, 0xaa, 0xaa, 0x2a, 0xa5, 0xfa, 0xff,
   0x6f, 0x55, 0x2a, 0x00, 0x00, 0xe0, 0xff, 0xff, 0xaf, 0x2a, 0x49, 0xaa,
   0x52, 0x55, 0xfb, 0xff, 0xbf, 0xaa, 0x2a, 0x00, 0x00, 0x80, 0xff, 0xff,
   0xaf, 0xaa, 0xaa, 0x2a, 0x55, 0x55, 0xfb, 0xff, 0xfe, 0x52, 0x25, 0x00,
   0x00, 0x00, 0xfe, 0xff, 0xbf, 0xaa, 0xaa, 0x54, 0x55, 0xaa, 0xde, 0xf6,
   0x57, 0x55, 0x2a, 0x00, 0x00, 0x00, 0xf8, 0xff, 0x6f, 0x55, 0x55, 0x55,
   0x55, 0xa5, 0xfa, 0xef, 0xdf, 0xaa, 0x2a, 0x00, 0x00, 0x00, 0xc0, 0xff,
   0xdf, 0x55, 0xb5, 0xd5, 0x6a, 0x5d, 0xff, 0xff, 0xbf, 0x6a, 0x1d, 0x00,
   0x00, 0x00, 0x00, 0x00, 0xa0, 0xfd, 0xaf, 0xdd, 0xde, 0xeb, 0xfa, 0xff,
   0xbf, 0xdf, 0x35, 0x00, 0x00, 0x00, 0x00, 0x00, 0xa0, 0xa6, 0x7a, 0x6b,
   0xab, 0xb6, 0xfd, 0xff, 0x7f, 0xb5, 0x2e, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x80, 0x6d, 0xd5, 0xde, 0xba, 0x6d, 0xfb, 0xff, 0xbf, 0xd5, 0x2d, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x40, 0xdb, 0x5b, 0xb5, 0xd7, 0xd6, 0xfe, 0xff,
   0xdf, 0xbe, 0x16, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xb4, 0xf6, 0xb7,
   0xba, 0xdd, 0xfa, 0xff, 0xdf, 0xea, 0x06, 0x00 };

static unsigned char geiger_rw[] = {
   0x00, 0x00, 0x00, 0x00, 0x00, 0xa8, 0xad, 0xad, 0xad, 0xad, 0xad, 0xad,
   0xad, 0x15, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x6a, 0xb5, 0x6a,
   0xb5, 0x6a, 0xb5, 0x6a, 0xb5, 0xf6, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0xad, 0x6d, 0x5b, 0x6b, 0x5b, 0x6b, 0x5b, 0x6b, 0xad, 0x01, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x40, 0x5b, 0xd5, 0xd6, 0xda, 0xd6, 0xda, 0x6a,
   0xad, 0x55, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc0, 0x6a, 0xab, 0x5a,
   0x57, 0xad, 0x55, 0xd7, 0x5a, 0x5b, 0x05, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x40, 0xdb, 0x6e, 0x6b, 0xd5, 0x5a, 0x5b, 0xb5, 0xd6, 0xb6, 0x0d, 0x00,
   0x00, 0x00, 0x00, 0x00, 0xb0, 0x56, 0xd5, 0x5a, 0xad, 0xb5, 0xb6, 0xd6,
   0xb5, 0x6a, 0x1b, 0x00, 0x00, 0x00, 0x00, 0x00, 0xd0, 0xd5, 0x5a, 0x6b,
   0xbb, 0xd6, 0xea, 0x5a, 0xad, 0x56, 0x15, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x50, 0x5d, 0xab, 0xd6, 0xaa, 0xb5, 0x55, 0xab, 0x75, 0x6d, 0x1b, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x68, 0x6b, 0xed, 0x5a, 0x6b, 0xad, 0xb6, 0xb6,
   0xd6, 0x5a, 0x35, 0x00, 0x00, 0x00, 0x00, 0x00, 0xd0, 0xda, 0x9a, 0xb5,
   0x56, 0x6b, 0x6d, 0x6d, 0x55, 0x6b, 0x2b, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x50, 0xab, 0x22, 0x44, 0x48, 0x08, 0x01, 0x01, 0x49, 0x54, 0x2d, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x68, 0x6d, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0xec, 0x1a, 0x00, 0x00, 0x00, 0x00, 0x00, 0x68, 0x5b, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0xa8, 0x36, 0x00, 0x00, 0x00, 0x00, 0x00,
   0xd0, 0x2a, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xd8, 0x2a, 0x00,
   0x00, 0x00, 0x00, 0x00, 0xb0, 0x76, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0xa8, 0x2d, 0x00, 0x00, 0x00, 0x00, 0x00, 0xa8, 0x55, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x58, 0x2b, 0x00, 0x00, 0x00, 0x00, 0x00,
   0xb0, 0x56, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x68, 0x2d, 0x00,
   0x00, 0x00, 0x00, 0x00, 0xd0, 0x2d, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0xa8, 0x1a, 0x00, 0x00, 0x00, 0x00, 0x00, 0x50, 0x75, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0xb0, 0x35, 0x00, 0x00, 0x00, 0x00, 0x00,
   0xd8, 0x56, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x6c, 0x2b, 0x00,
   0x00, 0x00, 0x00, 0x00, 0xb0, 0x55, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x50, 0x2d, 0x00, 0x00, 0x00, 0x00, 0x00, 0x50, 0x5b, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0xd8, 0x1a, 0x00, 0x00, 0x00, 0x00, 0x00,
   0xd0, 0x56, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xb0, 0x35, 0x00,
   0x00, 0x00, 0x00, 0x00, 0xa8, 0x5a, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0xac, 0x16, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf0, 0x56, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0xa8, 0x35, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x48, 0x2d, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x58, 0x2b, 0x00,
   0x00, 0x00, 0x00, 0x00, 0xd0, 0x75, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0xb0, 0x2e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x58, 0x2b, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0xd8, 0x2a, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x68, 0x6d, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x50, 0x2d, 0x00,
   0x00, 0x00, 0x00, 0x00, 0xd0, 0x56, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x6c, 0x2b, 0x00, 0x00, 0x00, 0x00, 0x00, 0xb0, 0x5a, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x58, 0x2d, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x68, 0x2b, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x68, 0x2b, 0x00,
   0x00, 0x00, 0x00, 0x00, 0xd8, 0x76, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x54, 0x2d, 0x00, 0x00, 0x00, 0x00, 0x00, 0xa8, 0xad, 0x89, 0x88,
   0x24, 0x49, 0x12, 0x21, 0x04, 0xb5, 0x15, 0x00, 0x00, 0x00, 0x00, 0x00,
   0xb8, 0x6a, 0xbb, 0xbb, 0x6d, 0xdb, 0x76, 0xef, 0x7d, 0xad, 0x36, 0x00,
   0x00, 0x00, 0x00, 0x00, 0xa8, 0xad, 0x56, 0x55, 0xd5, 0xaa, 0x55, 0x55,
   0xd5, 0xda, 0x2a, 0x00, 0x00, 0x00, 0x00, 0x00, 0x68, 0x6b, 0xd5, 0xb6,
   0xad, 0xb6, 0xd6, 0x5a, 0xab, 0xb5, 0x2e, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x58, 0xad, 0xad, 0x55, 0xdb, 0xaa, 0xad, 0xb5, 0xb6, 0xd6, 0x2a, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x68, 0x5b, 0xbb, 0x76, 0xb5, 0xb6, 0x6a, 0x6d,
   0xad, 0xad, 0x2d, 0x00, 0x00, 0x00, 0x00, 0x00, 0xd8, 0x6a, 0x55, 0xcd,
   0x6a, 0x6b, 0x5b, 0xab, 0xb5, 0x5a, 0x15, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x58, 0xdb, 0xd6, 0x5a, 0x57, 0xad, 0xd6, 0x6a, 0xab, 0xd5, 0x36, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x68, 0x55, 0x6d, 0x6b, 0xed, 0xda, 0x5a, 0x57,
   0x6d, 0xbb, 0x2d, 0x00, 0x00, 0x00, 0x00, 0x00, 0x68, 0xdb, 0xaa, 0xda,
   0xaa, 0x56, 0x6b, 0x6d, 0xab, 0xaa, 0x2a, 0x00, 0x00, 0x00, 0x00, 0x00,
   0xd8, 0x56, 0xdb, 0x56, 0x6d, 0xa9, 0xac, 0x5a, 0xdd, 0xd6, 0x16, 0x00,
   0x00, 0x00, 0x00, 0x00, 0xa8, 0xda, 0xb6, 0xb5, 0x15, 0x81, 0xd0, 0xd6,
   0xaa, 0xb5, 0x35, 0x00, 0x00, 0x00, 0x00, 0x00, 0xb8, 0xb5, 0xaa, 0x56,
   0x23, 0x24, 0x82, 0x5a, 0x5b, 0xad, 0x16, 0x00, 0x00, 0x00, 0x00, 0x00,
   0xa8, 0xad, 0xb6, 0xb5, 0x8a, 0x44, 0x28, 0xd4, 0x6a, 0x6b, 0x35, 0x00,
   0x00, 0x00, 0x00, 0x00, 0xb8, 0xea, 0x6a, 0x6d, 0x50, 0x10, 0x85, 0xba,
   0xd6, 0xda, 0x16, 0x00, 0x00, 0x00, 0x00, 0x00, 0xa8, 0xad, 0xad, 0xd5,
   0x05, 0x22, 0x20, 0xd4, 0x5a, 0xab, 0x2d, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x78, 0xab, 0x6a, 0x5b, 0xa9, 0x88, 0x8a, 0x56, 0xab, 0x56, 0x35, 0x00,
   0x00, 0x00, 0x00, 0x00, 0xa8, 0xb6, 0xad, 0x6a, 0x13, 0x11, 0x20, 0xda,
   0xb6, 0x75, 0x2b, 0x00, 0x00, 0x00, 0x00, 0x00, 0xd0, 0x6a, 0x6b, 0x5b,
   0xa5, 0x40, 0x85, 0xb5, 0x5a, 0xad, 0x16, 0x00, 0x00, 0x00, 0x00, 0x00,
   0xb0, 0xad, 0xda, 0xd6, 0x0a, 0x0a, 0x28, 0x57, 0x6b, 0xab, 0x35, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x50, 0xdb, 0x56, 0xb5, 0xa5, 0x50, 0xc2, 0x6c,
   0xad, 0xb6, 0x16, 0x00, 0x00, 0x00, 0x00, 0x00, 0xd0, 0xaa, 0xd5, 0x56,
   0x97, 0x42, 0x88, 0x5b, 0x6b, 0xad, 0x35, 0x00, 0x00, 0x00, 0x00, 0x00,
   0xb8, 0x6d, 0xad, 0x6d, 0x4d, 0x04, 0x61, 0x6a, 0xdd, 0x5a, 0x2b, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x50, 0x5b, 0xbb, 0xaa, 0x9a, 0x74, 0xca, 0xd6,
   0xaa, 0xb5, 0x2e, 0x00, 0x00, 0x00, 0x00, 0x00, 0xb0, 0xaa, 0xaa, 0x6d,
   0xab, 0xab, 0xb1, 0xad, 0xb5, 0xd6, 0x2a, 0x00, 0x00, 0x00, 0x00, 0x00,
   0xa0, 0x6d, 0xab, 0xda, 0xb6, 0x5a, 0x6f, 0xb5, 0xd6, 0x5a, 0x2d, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x78, 0xdb, 0xb6, 0x55, 0xad, 0xb6, 0xaa, 0xad,
   0xad, 0xb5, 0x15, 0x00, 0x00, 0x00, 0x00, 0x00, 0x50, 0x55, 0xb5, 0xb6,
   0xb5, 0xd5, 0x5a, 0xb5, 0x5a, 0xad, 0x36, 0x00, 0x00, 0x00, 0x00, 0x00,
   0xd0, 0xb6, 0x6d, 0xad, 0x6a, 0xad, 0xb5, 0x6d, 0xb5, 0xb5, 0x2d, 0x00,
   0x00, 0x00, 0x00, 0x00, 0xb0, 0x55, 0xab, 0xd5, 0xae, 0xb5, 0x56, 0xab,
   0x6b, 0xad, 0x2a, 0x00, 0x00, 0x00, 0x00, 0x00, 0xa8, 0xb6, 0x5a, 0x5b,
   0x55, 0x85, 0xda, 0x5a, 0xad, 0xb5, 0x2d, 0x00, 0x00, 0x00, 0x00, 0x00,
   0xb0, 0xd5, 0xd6, 0x6a, 0xdb, 0x24, 0xb4, 0xd6, 0x5a, 0x6b, 0x2b, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x50, 0x5b, 0xad, 0xd6, 0x2a, 0x91, 0xaa, 0xb5,
   0xb5, 0x56, 0x2d, 0x00, 0x00, 0x00, 0x00, 0x00, 0xe8, 0xd6, 0xba, 0x5d,
   0x7b, 0x02, 0x68, 0xad, 0xd6, 0xda, 0x2a, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x50, 0x6d, 0x55, 0xd5, 0x26, 0xa9, 0x54, 0x6b, 0xb5, 0x56, 0x1b, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x50, 0xab, 0x6d, 0x5b, 0x2d, 0x82, 0x60, 0xad,
   0xad, 0xb5, 0x36, 0x00, 0x00, 0x00, 0x00, 0x00, 0xb8, 0xb6, 0x5a, 0xd5,
   0x5a, 0x14, 0x5a, 0x5b, 0x6b, 0x6d, 0x15, 0x00, 0x00, 0x00, 0x00, 0x00,
   0xd0, 0x6d, 0x4b, 0x95, 0x55, 0x41, 0xd0, 0x52, 0x88, 0xd5, 0x36, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x30, 0xd5, 0x22, 0x40, 0x1b, 0x2a, 0xb1, 0x06,
   0x25, 0x5b, 0x2d, 0x00, 0x00, 0x00, 0x00, 0x00, 0xe0, 0xad, 0x4a, 0x0a,
   0x75, 0x22, 0xa2, 0x55, 0x00, 0xd6, 0x2a, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x58, 0xdb, 0x22, 0x50, 0x2b, 0x89, 0x5c, 0x01, 0x55, 0xb5, 0x2d, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x50, 0x55, 0x8b, 0x42, 0x56, 0x91, 0xb0, 0x2b,
   0x80, 0x56, 0x2b, 0x00, 0x00, 0x00, 0x00, 0x00, 0xb0, 0x6d, 0x25, 0x08,
   0x6d, 0x4a, 0x6e, 0x41, 0x95, 0x6d, 0x2d, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x60, 0x5b, 0x4b, 0xa1, 0x5a, 0x91, 0x54, 0x0b, 0x10, 0xd5, 0x2a, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x58, 0xb5, 0x12, 0x0a, 0xea, 0xa6, 0xb6, 0xa0,
   0xc4, 0x56, 0x1b, 0x00, 0x00, 0x00, 0x00, 0x00, 0x68, 0xeb, 0xa6, 0x90,
   0xac, 0xb6, 0xad, 0x85, 0x88, 0xb5, 0x36, 0x00, 0x00, 0x00, 0x00, 0x00,
   0xd0, 0x56, 0x4b, 0x42, 0xd4, 0x6a, 0x35, 0x10, 0xa2, 0x6e, 0x15, 0x00,
   0x00, 0x00, 0x00, 0x00, 0xb0, 0x5a, 0x8d, 0x88, 0x50, 0x5b, 0x6b, 0x45,
   0x44, 0xd5, 0x36, 0x00, 0x00, 0x00, 0x00, 0x00, 0xd0, 0xb6, 0x15, 0x21,
   0x6a, 0xd5, 0x16, 0x10, 0xd1, 0x5a, 0x2d, 0x00, 0x00, 0x00, 0x00, 0x00,
   0xd0, 0xaa, 0x36, 0x45, 0x40, 0x5b, 0xad, 0x22, 0x50, 0x6b, 0x2b, 0x00,
   0x00, 0x00, 0x00, 0x00, 0xa8, 0x6d, 0x4d, 0x04, 0xd5, 0xd6, 0x4a, 0x84,
   0xd2, 0xd6, 0x1a, 0x00, 0x00, 0x00, 0x00, 0x00, 0x68, 0x6b, 0xbb, 0x54,
   0xa0, 0x5a, 0x9b, 0x14, 0x52, 0xad, 0x36, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x50, 0xad, 0x2a, 0x01, 0xb5, 0xb5, 0x36, 0x41, 0xb8, 0xb5, 0x15, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x68, 0x6b, 0x6b, 0x2a, 0xa8, 0xd6, 0x6a, 0x8a,
   0x6a, 0xad, 0x36, 0x00, 0x00, 0x00, 0x00, 0x00, 0xd0, 0xd6, 0xd6, 0x48,
   0xd9, 0x5a, 0x2b, 0x11, 0x54, 0x6b, 0x2d, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x50, 0x5d, 0xad, 0x13, 0x54, 0x6b, 0xed, 0xa4, 0xda, 0x5a, 0x2b, 0x00,
   0x00, 0x00, 0x00, 0x00, 0xd8, 0x6a, 0xb5, 0xa4, 0xda, 0x5a, 0x9b, 0x12,
   0xab, 0xb6, 0x1a, 0x00, 0x00, 0x00, 0x00, 0x00, 0xb0, 0xab, 0xad, 0x8b,
   0x54, 0x6b, 0xb5, 0xa2, 0xda, 0xea, 0x36, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x50, 0x6d, 0x6b, 0x16, 0xbb, 0xd6, 0xd6, 0xaa, 0xab, 0x55, 0x15, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x68, 0xab, 0xda, 0x75, 0x6a, 0xad, 0xb5, 0x52,
   0x6d, 0x5d, 0x3b, 0x00, 0x00, 0x00, 0x00, 0x00, 0xd0, 0xb6, 0x55, 0xcd,
   0xd5, 0x5a, 0xad, 0x6d, 0x5b, 0x6b, 0x15, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x50, 0xad, 0xb6, 0x3a, 0x5b, 0x6b, 0x6b, 0xab, 0x6a, 0xd5, 0x36, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x68, 0x6b, 0xad, 0xd5, 0xd6, 0xda, 0x5a, 0x6d,
   0xdb, 0xb6, 0x2d, 0x00, 0x00, 0x00, 0x00, 0x00, 0xd0, 0x5a, 0x6b, 0xab,
   0x5a, 0xab, 0xd6, 0xda, 0xaa, 0xad, 0x2a, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x50, 0xeb, 0x5a, 0x6d, 0x6b, 0x6d, 0xad, 0x55, 0x5b, 0xb5, 0x2d, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x60, 0xad, 0x6a, 0xdb, 0x5a, 0xab, 0xb5, 0xb6,
   0x6a, 0x6b, 0x15, 0x00, 0x00, 0x00, 0x00, 0x00, 0xa0, 0x6b, 0xdb, 0xaa,
   0xb5, 0x5a, 0xad, 0xd5, 0xd6, 0x56, 0x0b, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x80, 0xd6, 0xaa, 0xb6, 0xd6, 0xb6, 0xb5, 0xb6, 0xad, 0xda, 0x0a, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x80, 0x5a, 0xdb, 0xaa, 0xb5, 0x55, 0x6b, 0xad,
   0xda, 0x56, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xd4, 0xaa, 0x6d,
   0xad, 0x76, 0xad, 0xd5, 0x56, 0xb5, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0xa0, 0xb6, 0x5a, 0x6b, 0xad, 0xb5, 0xb6, 0xda, 0x0a, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x54, 0x6b, 0xad, 0x55, 0x6b, 0xad,
   0x95, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x54,
   0x55, 0x6d, 0xad, 0x2a, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };


void epd_show_logo()
{
    u8g2Fonts.setFontMode(1);                        // use u8g2 transparent mode (this is default)
    u8g2Fonts.setFontDirection(0);                   // left to right (this is default)
    u8g2Fonts.setForegroundColor(GxEPD_BLACK);                // apply Adafruit GFX color
    u8g2Fonts.setBackgroundColor(GxEPD_WHITE);                // apply Adafruit GFX color
    u8g2Fonts.setFont(u8g2_font_helvR14_tf);         // select u8g2 font from here: https://github.com/olikraus/u8g2/wiki/fntlistall
    int16_t tw = u8g2Fonts.getUTF8Width(epd_logo_string); // text box width
    int16_t ta = u8g2Fonts.getFontAscent();          // positive
    int16_t td = u8g2Fonts.getFontDescent();         // negative; in mathematicians view
    int16_t th = ta - td;                            // text box height

    uint16_t x = (display.width() - tw) / 2;
    uint16_t y = 20;

    display.firstPage();

    display.fillScreen(GxEPD_WHITE);
    display.drawXBitmap(0, y, geiger_bw, geiger_width, geiger_height, GxEPD_BLACK);
    display.drawXBitmap(0, y, geiger_rw, geiger_width, geiger_height, GxEPD_RED);

    y += geiger_height + 20;
    u8g2Fonts.setCursor(x, y);
    u8g2Fonts.setForegroundColor(GxEPD_BLACK);
    u8g2Fonts.print(epd_logo_string);

    y += th - 5;
    u8g2Fonts.setForegroundColor(GxEPD_RED);
    u8g2Fonts.setFont(u8g2_font_helvR08_tf);
    tw = u8g2Fonts.getUTF8Width(epd_logo_copyright); // text box width
    u8g2Fonts.setCursor((display.width() - tw) / 2, y);
    u8g2Fonts.print(epd_logo_copyright);
    display.displayWindow(0, 0, display.width(), display.height());
    
    //display.nextPage();
}

#define HISTORY_VALUES 100
void epd_update(uint32_t *values, uint32_t pos)
{
    char rad[32];
    //u8g2Fonts.setFontMode(1);
    //u8g2Fonts.setFontDirection(0);
    u8g2Fonts.setForegroundColor(GxEPD_BLACK);
    //u8g2Fonts.setBackgroundColor(GxEPD_WHITE);
    u8g2Fonts.setFont(u8g2_font_helvR14_tf);
    int16_t ta = u8g2Fonts.getFontAscent();          // positive
    int16_t td = u8g2Fonts.getFontDescent();         // negative; in mathematicians view
    int16_t th = ta - td;                            // text box height

    uint16_t window_x = 0;
    uint16_t window_y = geiger_height + 70;
    uint16_t window_width = display.width() - window_x;
    uint16_t window_height = display.height() - window_y;

    u8g2Fonts.setCursor(window_x, window_y);

    //display.setPartialWindow(window_x, window_y, window_width, window_height);
    display.fillRect(window_x, window_y, window_width, window_height, GxEPD_WHITE);
    display.setCursor(window_x, window_y+th);
    sprintf(rad, "%2.3f µS/h", values[(pos + HISTORY_VALUES - 1) % HISTORY_VALUES] * 0.006315f);
    int16_t tw = u8g2Fonts.getUTF8Width(rad);
    u8g2Fonts.setCursor((display.width() - tw) / 2, window_y+th);
    u8g2Fonts.print(rad);

    uint32_t plot_height = 40;
    uint32_t plot_x = 10;
    uint32_t plot_y = window_y + 35 + plot_height; /* baseline! */
    uint32_t plot_width = display.width() - plot_x;

    display.drawLine(plot_x - 1, plot_y - plot_height, plot_x - 1, plot_y + 4, GxEPD_RED);
    display.drawLine(plot_x - 4, plot_y + 1, plot_x + plot_width + 4, plot_y + 1, GxEPD_RED);

    uint32_t max_cpm = 100;

    if(pos < HISTORY_VALUES)
    {
        for(uint32_t entry = 0; entry < MIN(pos, plot_width); entry++)
        {
            uint32_t y = values[entry % HISTORY_VALUES] * plot_height / max_cpm;
            uint16_t color = GxEPD_BLACK;

            if(y > plot_height)
            {
                y = plot_height;
                color = GxEPD_RED;
            }

            display.drawLine(plot_x + entry, plot_y - y, plot_x + entry, plot_y, color);
        }
    }
    else
    {
        for(uint32_t entry = 0; entry < MIN(HISTORY_VALUES, plot_width); entry++)
        {
            uint32_t y = values[(pos + 1 + entry) % HISTORY_VALUES] * plot_height / max_cpm;
            uint16_t color = GxEPD_BLACK;

            if(y > plot_height)
            {
                y = plot_height;
                color = GxEPD_RED;
            }

            display.drawLine(plot_x + entry, plot_y - y, plot_x + entry, plot_y, color);
        }
    }
    
    display.displayWindow(window_x, window_y, window_width, window_height);
}


void epd_loop_task(void * parameter)
{
    uint32_t last_values_pos = 0;
    uint32_t last_values[HISTORY_VALUES];

    memset(last_values, 0x00, sizeof(last_values));
    epd_show_logo();

    while(1)
    {
        uint64_t now = millis();

        if(now - epd_lasttime > 60000)
        {
            epd_lasttime = now;
            Serial.printf("[EPD] udpate\n");

            last_values[last_values_pos++ % HISTORY_VALUES] = det_counts_last;
            epd_update(last_values, last_values_pos);
        }

        vTaskDelay(1000 / portTICK_PERIOD_MS);
    }
}

void epd_setup()
{
    pinMode(EPD_BUSY, INPUT);
    pinMode(EPD_RST, OUTPUT);
    pinMode(EPD_DC, OUTPUT);
    pinMode(EPD_CS, OUTPUT);

    digitalWrite(EPD_CS, HIGH);

    SPI.begin(EPD_SCLK, 13, EPD_MOSI, 15);

    display.init();
    u8g2Fonts.begin(display);

    xTaskCreate(
        epd_loop_task,    // Function that should be called
        "EPD task",   // Name of the task (for debugging)
        6000,            // Stack size (bytes)
        NULL,            // Parameter to pass
        1,               // Task priority
        NULL             // Task handle
    );
}
